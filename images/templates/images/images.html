{% extends "home/index.html" %}
{% load static %}

{% block sort %}
    {% include 'includes/sort-dropdown.html' %}
{% endblock %}

{% block view_all %}
    {% include 'includes/view_all.html' %}
{% endblock %}

{% block content %}
    <div class="overlay"></div>
    <div class="container-fluid">
        <div class="row">
            <div class="image-container col-10 offset-1">
                <div class="row">
                    <div class="col-12">
                        {% if search_term %}
                            <h2>Search Results...</h2>
                            {% if images|length > 1 %}
                                <h5>{{ images|length }} images found for Search query : &lsquo;{{ search_term }}&rsquo;</h5>
                            {% else %}
                                <h5>Only {{ images|length }} image found for Search query : &lsquo;{{ search_term }}&rsquo;</h5>
                            {% endif %} 
                        {% else %} 
                            <h2>All Images</h2>
                            {% if images|length > 1 %}  
                                <h5>{{ images|length }} images found</h5>
                            {% else %}
                                <h5>Only {{ images|length }} image found </h5>
                            {% endif %}        
                        {% endif %}
                    </div>
                    {% for i in images %}
                        <div class="col-sm-6 col-md-6 col-lg-4 col-xl-3">
                            <div class="card mx-auto my-auto" style="width: 15rem; height: 21rem;">
                                <a class="mx-auto" data-fancybox="gallery" href="{{ i.image.url }}">
                                    <img class="img-fluid mt-3" src="{{ i.tmnl_img.url }}" width="160" height="106">
                                </a>
                                <div class="card-body">
                                    <table>
                                        <tr>
                                            <th>Title: {{ i.img_title }}</th>
                                        </tr>
                                        <tr>
                                            <td>Taken by: 
                                                <a href="{% url 'user_images' i.user_id %}" class="">{{ i.user_id }}</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="fa fa-star"></span>
                                                <span class="fa fa-star"></span>
                                                <span class="fa fa-star"></span>
                                                <span class="fa fa-star"></span>
                                                <span class="fa fa-star"></span>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <form class="form" action="{% url 'add_to_bag' i.id %}" method="POST">
                                        {% csrf_token %}
                                        <div class="form-row">
                                            <div class="col-6 form-col">
                                                <input class="form-control qty_input" type="number"
                                                name="quantity" value="1" min="1" max="99"
                                                data-item_id="{{ i.id }}"
                                                id="id_qty_{{ i.id }}">
                                            </div>
                                            <div class="col-6 form-col">
                                                <input type="submit" class="btn" value="Add to Bag">
                                            </div>
                                        </div>
                                        <input type="hidden" name="redirect_url" value="{{ request.path }}">
                                    </form>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    
{% endblock %}